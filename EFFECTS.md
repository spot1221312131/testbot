# Доступные эффекты для монтажа видео

Этот документ описывает все эффекты, которые может применять бот через FFmpeg.

## Список эффектов

### 1. Затемнение (darken)
- **Описание**: Затемняет видео на 50%
- **FFmpeg фильтр**: `eq=brightness=-0.5:contrast=1.0`
- **Пример запроса**: "добавь затемнение с 5 по 10 секунду"

### 2. Осветление (brighten)
- **Описание**: Осветляет видео на 50%
- **FFmpeg фильтр**: `eq=brightness=0.5:contrast=1.0`
- **Пример запроса**: "осветли первые 10 секунд"

### 3. Чёрно-белое (black_white)
- **Описание**: Преобразует цветное видео в чёрно-белое
- **FFmpeg фильтр**: `hue=s=0`
- **Пример запроса**: "сделай чёрно-белый эффект с 5 до 15 секунд"

### 4. Увеличение насыщенности (saturate)
- **Описание**: Делает цвета более яркими и насыщенными
- **FFmpeg фильтр**: `eq=saturation=1.5`
- **Пример запроса**: "увеличь насыщенность цветов"

### 5. Уменьшение насыщенности (desaturate)
- **Описание**: Приглушает цвета
- **FFmpeg фильтр**: `eq=saturation=0.5`
- **Пример запроса**: "приглуши цвета"

### 6. Размытие (blur)
- **Описание**: Размывает видео
- **FFmpeg фильтр**: `boxblur=5:1`
- **Пример запроса**: "размыть первые 10 секунд"

### 7. Повышение резкости (sharpen)
- **Описание**: Повышает резкость видео
- **FFmpeg фильтр**: `unsharp=5:5:1.0:5:5:0.0`
- **Пример запроса**: "сделай четче"

### 8. Контраст (contrast)
- **Описание**: Увеличивает контраст
- **FFmpeg фильтр**: `eq=contrast=1.5`
- **Пример запроса**: "увеличь контраст"

### 9. Увеличение/зум (zoom_in)
- **Описание**: Увеличивает масштаб видео
- **FFmpeg фильтр**: `crop=iw*0.8:ih*0.8:iw*0.1:ih*0.1,scale=iw*1.25:ih*1.25`
- **Пример запроса**: "приблизь видео"

### 10. Уменьшение/отдаление (zoom_out)
- **Описание**: Уменьшает масштаб видео
- **FFmpeg фильтр**: `scale=iw*0.8:ih*0.8,pad=iw:ih:(ow-iw)/2:(oh-ih)/2:black`
- **Пример запроса**: "отдали видео"

### 11. Замедление (slow_motion)
- **Описание**: Замедляет воспроизведение в 2 раза
- **FFmpeg фильтр**: `setpts=2.0*PTS` + `atempo=0.5` для аудио
- **Пример запроса**: "замедли видео с 20 по 25 секунду"

### 12. Ускорение (fast_motion)
- **Описание**: Ускоряет воспроизведение в 2 раза
- **FFmpeg фильтр**: `setpts=0.5*PTS` + `atempo=2.0` для аудио
- **Пример запроса**: "ускорить видео"

### 13. Поворот (rotate)
- **Описание**: Поворачивает видео на 90 градусов по часовой стрелке
- **FFmpeg фильтр**: `transpose=1`
- **Пример запроса**: "поверни видео"

### 14. Отражение по горизонтали (flip_horizontal)
- **Описание**: Отражает видео по горизонтали
- **FFmpeg фильтр**: `hflip`
- **Пример запроса**: "отрази горизонтально"

### 15. Отражение по вертикали (flip_vertical)
- **Описание**: Отражает видео по вертикали
- **FFmpeg фильтр**: `vflip`
- **Пример запроса**: "отрази вертикально"

### 16. Виньетка (vignette)
- **Описание**: Добавляет затемнение по краям
- **FFmpeg фильтр**: `vignette=PI/4`
- **Пример запроса**: "добавь виньетку"

### 17. Сепия (sepia)
- **Описание**: Применяет эффект сепии (старинное фото)
- **FFmpeg фильтр**: `colorchannelmixer=.393:.769:.189:0:.349:.686:.168:0:.272:.534:.131`
- **Пример запроса**: "сделай эффект сепии"

### 18. Инверсия (invert)
- **Описание**: Инвертирует цвета (негатив)
- **FFmpeg фильтр**: `negate`
- **Пример запроса**: "инвертируй цвета"

### 19. Переход (transition)
- **Описание**: Используется для готовых файлов эффектов из папки effects/
- **Пример запроса**: "добавь переход"

## Технические детали

Все эффекты применяются через FFmpeg с использованием видеофильтров (`-vf`). 
Аудио копируется без изменений (`-c:a copy`), кроме эффектов замедления и ускорения, 
где аудио также обрабатывается для синхронизации.

Кодек видео: `libx264`
Кодек аудио: `aac` (для slow_motion/fast_motion) или `copy` (для остальных)

## Как добавить новый эффект

1. Добавьте обработку эффекта в функцию `replace_with_effect()` в `service/ffmpeg.py`
2. Добавьте описание эффекта в `service/prompts.py`
3. Обновите этот документ

